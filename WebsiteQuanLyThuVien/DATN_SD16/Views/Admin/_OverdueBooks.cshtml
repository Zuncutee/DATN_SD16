@model IEnumerable<DATN_SD16.Models.Entities.Borrow>

<div class="table-container">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Mã phiếu</th>
                <th>Độc giả</th>
                <th>Sách</th>
                <th>Ngày mượn</th>
                <th>Hạn trả</th>
                <th>Số ngày quá hạn</th>
                <th>Phí phạt</th>
                <th>Trạng thái</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var borrow in Model)
            {
                var daysOverdue = (DateTime.Now - borrow.DueDate).Days;
                <tr>
                    <td>@borrow.BorrowNumber</td>
                    <td>@borrow.User?.FullName</td>
                    <td>@borrow.Copy?.Book?.Title</td>
                    <td>@borrow.BorrowDate.ToString("dd/MM/yyyy")</td>
                    <td>@borrow.DueDate.ToString("dd/MM/yyyy")</td>
                    <td>
                        @if (daysOverdue > 0)
                        {
                            <span class="badge bg-danger">@daysOverdue ngày</span>
                        }
                        else
                        {
                            <span class="badge bg-success">Đúng hạn</span>
                        }
                    </td>
                    <td><strong>@borrow.FineAmount.ToString("N0") VNĐ</strong></td>
                    <td>
                        @if (borrow.Status == "Borrowed")
                        {
                            <span class="badge bg-warning">Đang mượn</span>
                        }
                        else if (borrow.Status == "Overdue")
                        {
                            <span class="badge bg-danger">Quá hạn</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">@borrow.Status</span>
                        }
                    </td>
                </tr>
            }
            @if (!Model.Any())
            {
                <tr>
                    <td colspan="8" class="text-center text-muted">Không có sách quá hạn</td>
                </tr>
            }
        </tbody>
    </table>
</div>

