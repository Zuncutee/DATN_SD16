@model DATN_SD16.Models.Entities.User
@inject DATN_SD16.Repositories.Interfaces.IRepository<DATN_SD16.Models.Entities.Role> _roleRepository

@{
    var roles = await _roleRepository.GetAllAsync();
    var userRoles = Model.UserRoles?.Select(ur => ur.RoleId).ToList() ?? new List<int>();
}

<div class="mb-3">
    <label class="form-label">Tên đăng nhập *</label>
    <input type="text" name="Username" class="form-control" value="@Model.Username" required />
</div>
<div class="mb-3">
    <label class="form-label">Họ tên *</label>
    <input type="text" name="FullName" class="form-control" value="@Model.FullName" required />
</div>
<div class="mb-3">
    <label class="form-label">Email *</label>
    <input type="email" name="Email" class="form-control" value="@Model.Email" required />
</div>
<div class="mb-3">
    <label class="form-label">Số điện thoại</label>
    <input type="text" name="PhoneNumber" class="form-control" value="@Model.PhoneNumber" />
</div>
<div class="mb-3">
    <label class="form-label">Địa chỉ</label>
    <input type="text" name="Address" class="form-control" value="@Model.Address" />
</div>
<div class="mb-3">
    <label class="form-label">Vai trò *</label>
    <select name="roleIds" class="form-select" multiple required>
        @foreach (var role in roles)
        {
            <option value="@role.RoleId" @(userRoles.Contains(role.RoleId) ? "selected" : "")>@role.RoleName</option>
        }
    </select>
    <small class="text-muted">Giữ Ctrl để chọn nhiều vai trò</small>
</div>
<input type="hidden" name="UserId" value="@Model.UserId" />

